<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui" 
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Home</title>
    </h:head>
    <h:body>
        <p:panel header="Login"  style="position: absolute; top: 220px; left: 450px; " >
            <form method="POST" action="j_security_check" > 
                <h:form>
                    <h:panelGrid id="grid" columns="3" cellpadding="5" width="400"  >
                        <p:outputLabel value="Your Email: " style="font-weight:bold" ></p:outputLabel>  
                        <p:inputText id="j_username"  required="true" requiredMessage="Please enter your email address"  />  
                        <p:watermark for="j_username" value="email address" /> 
                        <p:outputLabel value="Your Password:" style="font-weight:bold" ></p:outputLabel>  
                        <p:password id="j_password"  required="true" requiredMessage="Please enter your password" ></p:password>
                        <p:watermark for="j_password" value="password" />
                    </h:panelGrid>
                    <p:separator />
                    <h:panelGrid id="buttons" columns="2" cellpadding="6" >
                        <p:commandButton ajax="false" type="submit" value="login" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" />
                        <p:commandButton value="Registration" type="button" onclick="PF('dlg2').show();" style="align-content: flex-end"  /> 
                    </h:panelGrid>
                </h:form>
            </form>        
            <p:dialog header="Registration" widgetVar="dlg2" modal="true" height="420" width="672">
                <h:form id="registerForm" >  
                    <h:panelGrid id="reg" columns="3" cellpadding="5" >
                        <p:outputLabel for="firstName"  value="Enter Your First Name:" style="font-weight:bold" />
                        <p:inputText id="firstName" value="#{user.firstName}"  size="40" label="firstName"
                                     required="true" requiredMessage="Please enter your first name" />
                        <p:watermark for="firstName" value="first name" />                 
                        <p:outputLabel for="lastName" value="Enter Your Last Name:" style="font-weight:bold" />
                        <p:inputText id="lastName" value="#{user.lastName}"  size="40" label="lastName"
                                     required="true" requiredMessage="Please enter your last name" />
                        <p:watermark for="lastName" value="last name" />
                        <p:outputLabel for="email"  value="Enter Your Email:" style="font-weight:bold"  /> 
                        <p:inputText id="email" required="true" label="email"  size="40" 
                                     requiredMessage="Please enter your email address."
                                     validatorMessage="Invalid email format"                             
                                     value="#{user.email}">
                            <f:validateRegex
                                pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
                            <f:validator validatorId="uniqueEmailValidator" />
                        </p:inputText>
                        <p:watermark for="email" value="email" />
                        <p:outputLabel for="password"  value="Enter Password :" style="font-weight:bold"  />
                        <p:password id="password" value="#{user.password}"   size="40" label="password"
                                    required="true" requiredMessage="Please enter your password" /> 
                        <p:watermark for="password" value="password" />
                        <p:outputLabel for="confirmPassword"  value="Enter Password again:" style="font-weight:bold"  />  
                        <p:password id="confirmPassword" value="#{user.confirmPassword}"  size="40"   /> 
                        <p:watermark for="confirmPassword" value="password" />
                    </h:panelGrid>
                    <h:form>
                        <p:messages id="errors" autoUpdate="true"/>
                    </h:form>
                    <p:remoteCommand name="rc" update="msgs" actionListener="#{user.register}"  />
                    <p:growl id="msgs" showDetail="true" />
                    <p:commandButton update="reg" type="button" onclick="rc()" validateClient="true" value="Create account" icon="ui-icon-refresh"  />
                </h:form>  
            </p:dialog>   
        </p:panel>
    </h:body>
</html>